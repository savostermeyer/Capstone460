<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SkinAI Classifier ‚Äî Upload</title>

  <link rel="stylesheet" href="styles/styles.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">

  <!-- Page-specific layout tweaks -->
  <style>
    .q-grid{
      display:grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 12px;
    }
    .q-card{
      background:#111;
      border:1px solid #2a2a2a;
      border-radius:12px;
      padding:14px;
      box-shadow: var(--shadow);
    }
    .q-label{
      display:block;
      font-weight:700;
      margin-bottom:8px;
    }
    .q-hint{
      margin:6px 0 0;
      font-size:.85rem;
      color:var(--muted);
    }
    .q-input,
    .q-select,
    .q-textarea{
      width:100%;
      padding:10px 12px;
      border-radius:10px;
      border:1px solid #2a2a2a;
      background:#0f0f0f;
      color:var(--text);
    }
    .q-textarea{
      min-height:110px;
      resize:vertical;
    }
    .section-sub{
      margin:-6px 0 14px;
      color:var(--muted);
    }
    .form-actions{
      position:sticky;
      bottom:0;
      background: linear-gradient(180deg, rgba(10,10,10,.1), var(--bg));
      padding:10px 0 0;
      margin-top: 6px;
      display:flex;
      gap:10px;
      align-items:center;
      flex-wrap:wrap;
    }
    .pill{
      display:inline-block;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid #2a2a2a;
      background:#111;
      margin: 2px 6px 0 0;
      font-size:.85rem;
    }
    .result{
      display:none;
    }
    .result.show{
      display:block;
    }
    .req{
      color: var(--gold);
      margin-left: 4px;
    }
    .dropzone{
      outline-offset:4px;
      cursor:pointer;
    }
    .preview img{
      width:100%;
      height:220px;
      object-fit:cover;
      border-radius:12px;
      border:1px solid #2a2a2a;
    }
  </style>
</head>

<body>
  <!-- Header -->
  <header class="site-header" role="banner">
    <div class="container header-inner">
      <a class="brand" href="index.html" aria-label="SkinAI Classifier Home">
        <div class="brand-mark">AI</div>
        <div class="brand-text">
          <strong>SkinAI Classifier</strong>
          <span>Purdue Fort Wayne University</span>
        </div>
      </a>

      <nav class="nav" aria-label="Primary">
        <a href="index.html"  class="nav-link" data-page="index.html">Home</a>
        <a href="upload.html"  class="nav-link" data-page="upload.html">Upload</a>
        <a href="reports.html" class="nav-link" data-page="reports.html">Reports</a>
        <a href="about.html"   class="nav-link" data-page="about.html">About Us</a>
        <a href="login.html"   class="nav-link js-login-link" data-page="login.html">Login</a>
      </nav>
    </div>
  </header>

  <!-- Main -->
  <main class="container narrow">
    <section class="section-pad" aria-labelledby="upload-title">
      <h1 id="upload-title" class="h-title">Upload</h1>
      <p class="muted">
        Drag and drop JPG/PNG files or click to browse. You can upload multiple images in one session.
      </p>

      <!-- DROPZONE -->
      <div
        id="dz"
        class="dropzone card"
        tabindex="0"
        aria-label="Image upload area"
      >
        <div style="font-size:2rem;">‚¨ÜÔ∏è</div>
        <p class="dz-title" style="font-weight:700;">Drag &amp; drop your images here</p>
        <p class="dz-sub" style="color:var(--muted)">or click to browse</p>

        <label class="file-btn" style="margin-top:10px;">
          Choose Files
          <!-- multiple = allow multiple images -->
          <input
            id="fileInput"
            type="file"
            accept="image/jpeg,image/png"
            multiple
          />
        </label>

        <p class="q-hint">
          Tip: Upload up to a few clear lesion images at once. Good lighting and one lesion per image work best.
        </p>
      </div>

      <!-- PREVIEW GRID -->
      <div
        id="preview"
        class="preview"
        style="
          margin-top:16px;
          display:grid;
          gap:12px;
          grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        "
        aria-live="polite"
        aria-atomic="true"
      ></div>

      <!-- INTAKE FORM -->
      <form id="intakeForm" class="card" novalidate>
        <h2 class="h-title" style="font-size:1.25rem; margin-top:0;">
          Patient Intake
        </h2>
        <p class="section-sub">
          Required fields marked with <span class="req">*</span>
        </p>

        <div class="q-grid">
          <div class="q-card">
            <label class="q-label" for="name">
              Full Name <span class="req">*</span>
            </label>
            <input
              class="q-input"
              id="name"
              name="name"
              type="text"
              placeholder="e.g., Alex Johnson"
              required
            />
          </div>

          <div class="q-card">
            <label class="q-label" for="age">
              Age <span class="req">*</span>
            </label>
            <input
              class="q-input"
              id="age"
              name="age"
              type="number"
              min="0"
              max="120"
              placeholder="e.g., 28"
              required
            />
          </div>

          <div class="q-card">
            <label class="q-label" for="sex">Sex at Birth</label>
            <select class="q-select" id="sex" name="sex">
              <option value="">Prefer not to say</option>
              <option>Female</option>
              <option>Male</option>
              <option>Intersex</option>
            </select>
          </div>

          <div class="q-card">
            <label class="q-label" for="skinType">
              Skin Condition <span class="req">*</span>
            </label>
            <select class="q-select" id="skinType" name="skinType" required>
              <option value="">Select...</option>
              <option value="I">
                I ‚Äî Very fair, always burns, never tans
              </option>
              <option value="II">
                II ‚Äî Fair, usually burns, tans minimally
              </option>
              <option value="III">
                III ‚Äî Medium, sometimes mild burn, tans uniformly
              </option>
              <option value="IV">
                IV ‚Äî Olive, rarely burns, tans well
              </option>
              <option value="V">
                V ‚Äî Brown, very rarely burns, tans easily
              </option>
              <option value="VI">
                VI ‚Äî Dark brown/black, never burns
              </option>
            </select>
          </div>

          <div class="q-card">
            <label class="q-label" for="location">
              Location <span class="req">*</span>
            </label>
            <input
              class="q-input"
              id="location"
              name="location"
              type="text"
              placeholder="e.g., Left forearm"
              required
            />
          </div>

          <div class="q-card">
            <label class="q-label" for="duration">
              Duration (days) <span class="req">*</span>
            </label>
            <input
              class="q-input"
              id="duration"
              name="duration"
              type="number"
              min="0"
              max="3650"
              placeholder="e.g., 14"
              required
            />
          </div>

          <div class="q-card" style="grid-column:1/-1;">
            <label>
              <input id="consent" type="checkbox" />
              I confirm this image is mine or I have permission to upload it, and I consent to analysis.
              <span class="req">*</span>
            </label>
          </div>
        </div>

        <div class="form-actions">
          <button id="analyzeBtn" class="btn btn-cta" type="submit" disabled>
            Analyze
          </button>
          <button type="button" id="clearBtn" class="btn btn-secondary">
            Clear
          </button>
          <span
            id="formMsg"
            class="q-hint"
            role="status"
            aria-live="polite"
          ></span>
        </div>
      </form>

      <!-- RESULTS CARD -->
      <div id="resultCard" class="card result" aria-live="polite">
        <h3 style="margin-top:0;">Preliminary Analysis (demo)</h3>
        <p id="resultMeta" class="muted"></p>
        <div id="resultTags" style="margin-top:6px;"></div>
      </div>
    </section>
  </main>

  <!-- FOOTER -->
  <footer class="site-footer" role="contentinfo">
    <div class="container">
      <p class="footnote">
        ¬© <span id="year"></span> SkinAI Classifier ¬∑ Senior Capstone Project ¬∑ For demonstration only.
      </p>
    </div>
  </footer>

  <!-- CHATBOT WIDGET -->
  <div id="chatbot-widget">
    <div id="chatbot-button">
      <span class="chat-icon">üí¨</span>
      <span class="chat-label">Talk to AI Agent</span>
    </div>

    <div id="chatbot-window">
      <div id="chatbot-header">
        <span>Talk to AI Agent</span>
        <button id="chatbot-reset" style="margin-left:8px;">‚Ü∫</button>
        <button id="chatbot-close">‚úï</button>
      </div>

      <div id="chatbot-messages"></div>

      <div id="chatbot-input-area">
        <input id="chatbot-input" type="text" placeholder="Type your message‚Ä¶" />
        <button id="chatbot-send">‚û§</button>
      </div>
    </div>
  </div>

  <!-- Login Required Modal -->
<div id="loginModal" class="modal hidden">
  <div class="modal-content">
    <h2>Please log in</h2>
    <p>To analyze your images and save your results, please sign in first.</p>
    <div class="modal-actions">
      <button id="loginModalConfirm" class="btn btn-cta">Login</button>
      <button id="loginModalCancel" class="btn btn-secondary">Cancel</button>
    </div>
  </div>
</div>

  <!-- Scripts -->
  <script src="scripts/chatbot.js"></script>
  <script src="scripts/app.js"></script>
  <script src="scripts/upload.js"></script>
  
</body>
</html>