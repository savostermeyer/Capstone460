<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SkinAI Classifier — Login</title>

  <!-- Match this path to your project structure -->
  <link rel="stylesheet" href="styles/styles.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
  <!-- Header / Nav -->
  <header class="site-header" role="banner">
    <div class="container header-inner">
      <a class="brand" href="index.html" aria-label="SkinAI Classifier Home">
        <div class="brand-mark" aria-hidden="true">AI</div>
        <div class="brand-text">
          <strong>SkinAI Classifier</strong>
          <span>Purdue University</span>
        </div>
      </a>
    <nav class="nav" aria-label="Primary">
  <a href="index.html" class="nav-link">Home</a>
  <a href="upload.html" class="nav-link">Upload</a>
  <a href="reports.html" class="nav-link">Reports</a>
  <a href="team.html" class="nav-link">About Us</a>
  <a href="login.html" class="nav-link">Login</a>
</nav>

    </div>
  </header>

  <!-- Main -->
  <main class="container narrow">
    <section class="section-pad" aria-labelledby="login-title">
      <h1 id="login-title" class="h-title">Login</h1>
      <p class="muted">Sign in to access your saved analysis reports.</p>

      <div class="card" role="region" aria-label="Login form">
        <form id="login-form" autocomplete="on" novalidate>
          <div style="display:grid; gap:12px; max-width:420px">
            <label>
              <span style="display:block; margin-bottom:6px;">Email</span>
              <input
                id="email"
                name="email"
                type="email"
                placeholder="you@pfw.edu"
                required
                style="width:100%;padding:10px;border-radius:8px;border:1px solid #2a2a2a;background:#0f0f0f;color:#ededed"
              />
            </label>

            <label>
              <span style="display:block; margin-bottom:6px;">Password</span>
              <input
                id="password"
                name="password"
                type="password"
                placeholder="••••••••"
                required
                minlength="6"
                style="width:100%;padding:10px;border-radius:8px;border:1px solid #2a2a2a;background:#0f0f0f;color:#ededed"
              />
            </label>

            <button type="submit" class="btn btn-cta">Sign In</button>
            <p id="login-msg" class="muted" aria-live="polite" style="margin-top:4px;"></p>
          </div>
        </form>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer class="site-footer" role="contentinfo">
    <div class="container">
      <p class="footnote">© <span id="year"></span> SkinAI Classifier · Senior Capstone Project · For demonstration only.</p>
    </div>
  </footer>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Safely set year
      const yearEl = document.getElementById('year');
      if (yearEl) yearEl.textContent = new Date().getFullYear();

      const form = document.getElementById('login-form');
      const email = document.getElementById('email');
      const password = document.getElementById('password');
      const msg = document.getElementById('login-msg');

      if (!form || !email || !password) {
        console.error('Login form elements not found.');
        return;
      }

      form.addEventListener('submit', (e) => {
        e.preventDefault();

        // Basic client-side validation
        if (!email.value || !password.value) {
          if (msg) msg.textContent = 'Please enter your email and password.';
          return;
        }

        // Demo auth: store user + redirect to Reports (respect ?next=)
        try {
          localStorage.setItem('skinai_user', email.value.trim());
        } catch (err) {
          console.error('localStorage error:', err);
        }

        if (msg) msg.textContent = 'Signing in…';

        // Pull ?next= page if present, else go to reports.html
        const params = new URLSearchParams(window.location.search);
        const next = params.get('next') || 'reports.html';

        setTimeout(() => {
          window.location.href = next;
        }, 300);
      });
    });
  </script>
</body>
</html>
